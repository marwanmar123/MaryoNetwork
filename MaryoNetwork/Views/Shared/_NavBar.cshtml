@using Microsoft.AspNetCore.Identity
@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager
@using System.Globalization
@using Microsoft.AspNetCore.Mvc.Localization

@inject IViewLocalizer localizer


@{
    string fullName = null;
    string id = null;
    byte[] image = null;
    if (SignInManager.IsSignedIn(User))
    {
        User user = await UserManager.FindByEmailAsync(User.Identity.Name);
        if (user != null)
        {
            fullName = user.FullName;
            id = user.Id;
            image = user.ProfilePicture;
        }


    }
}


    <div class="page-wrapper chiller-theme toggled">
        <nav id="sidebar" class="sidebar-wrapper bg-dark">
            <div class="sidebar-content">
                <div class="sidebar-header h-25 d-flex flex-column text-center align-items-center justify-content-center">
                    <div class="user-pic">
                        <a href="/Identity/Account/Manage" class="d-flex">
                            @if (image != null)
                            {
                                <img class="rounded-circle" src="data:image/*;base64,@Convert.ToBase64String(image)"> }
                            else
                            {
                                <p class="rounded-circle bg-success w-100 h-100">@fullName.Substring(0, 2).ToUpper()</p>
                            }
                        </a>
                    </div>
                    <div class="user-info">
                        <span class="user-name">
                            <a href="/Identity/Account/Manage" class="d-flex">
                                <strong>@fullName</strong>
                            </a>
                        </span>
                        <span class="user-role">Administrator</span>
                        <span class="user-status">
                            <i class="fa fa-circle"></i>
                            <span>Online</span>
                        </span>
                    </div>
                </div>

                <div class="sidebar-menu">
                    <ul>
                        <li class="header-menu">
                            <span>General</span>
                        </li>

                        <li class="sidebar-dropdown">
                            <a class="nav-link text-light" asp-area="" asp-controller="Home" asp-action="Index">
                                <i class="far fa-gem"></i>
                                @localizer["Home"]
                            </a>
                        </li>
                        <li class="sidebar-dropdown">
                            <a class="nav-link text-light" asp-area="" asp-controller="Home" asp-action="Privacy">
                                <i class="far fa-gem"></i>
                                @localizer["Privacy"]
                            </a>
                        </li>
                        <li class="sidebar-dropdown">
                            <a class="nav-link text-light" asp-area="" asp-controller="User" asp-action="Index">
                                <i class="far fa-gem"></i>
                                @localizer["Users"]
                            </a>
                        </li>
                        <li class="sidebar-dropdown">
                            <a class="nav-link text-light" asp-area="" asp-controller="Editor" asp-action="Index">
                                <i class="far fa-gem"></i>
                                @localizer["MaryoCode"]
                            </a>
                        </li>
                        <li class="sidebar-dropdown">
                            @if (User.IsInRole("admin"))
                            {
                                <a class="nav-link text-light" asp-area="" asp-controller="Dashboard" asp-action="Index">
                                    <i class="far fa-gem"></i>
                                    Dashboard
                                </a>
                            }
                        </li>
                    </ul>

                </div>
            </div>


        </nav>

    </div>
